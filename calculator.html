<!DOCTYPE html>
<html>
    <head>
           <title>CALCULATOR</title>
           <style>
                 table{
                 border: 1px solid black;
                 height:100px;
                 text-align:right;
                 background-color:Silver;
                 }
                 th{
                 background-color:OldLace;
                 border: 1px solid black;
                 height:100px;
                 text-align:right;
                 font-size:40px;
                 }
                 button{
                 background-color:OldLace;
                 border-radius:8px;
                 width:60px;
                 height:60px;
                 text-align:center;
                 }
                 button:hover{
                 background-color:Purple;
                 color:White;
                 }
                 .but{
                  background-color:Moccasin;
                  }
           </style>
    </head>
    <body>
          <table cellspacing=10>
                 <tr>
                     <th id="demo" colspan="5"></th>
                 </tr>
                 <tr>
                     <td><button type="button"onclick="oper(1)">1</button></td>
                     <td><button type="button"onclick="oper(2)">2</button</td>
                     <td><button type="button"onclick="oper(3)">3</button></td>
                     <td><button type="button"onclick="oper('DEL')">DEL</button></td>
                     <td><button type="button"onclick="oper('AC')">AC</button></td>
                </tr>
                <tr>
                     <td><button type="button"onclick="oper(4)">4</button></td>
                     <td><button type="button"onclick="oper(5)">5</button></td>
                     <td><button type="button"onclick="oper(6)">6</button></td>
                     <td><button type="button"onclick="oper('*')">*</button></td>
                     <td><button type="button"onclick="oper('/')">/</button></td>
                </tr>
                <tr>
                     <td><button type="button"onclick="oper(7)">7</button></td>
                     <td><button type="button"onclick="oper(8)">8</button></td>
                     <td><button type="button"onclick="oper(9)">9</button></td>
                     <td><button type="button"onclick="oper('+')">+</button></td>
                      <td><button type="button"onclick="oper('-')">-</button></td>
                </tr>
                <tr>
                     <td><button type="button"onclick="oper('.')">.</button></td>
                     <td><button type="button"onclick="oper(0)">0</button></td>
                     <td><button type="button"onclick="oper('^')">^</button></td>
                     <td><button type="button"onclick="oper('%')">%</button></td>
                     <td><button type="button" class="but"onclick="oper('=')">=</button></td>
                </tr>
         </table>
         <script>
                 function oper(x){
                     var y=document.getElementById("demo").innerText;
                     if(x!="="&&x!="DEL"&&x!="AC"){
                          document.getElementById("demo").innerHTML=(y.toString()).concat(x.toString());
                     }
                     else if(x=='=')
                     {
                          operate(y);
                     }
                     else if(x=='AC')
                          document.getElementById("demo").innerHTML="";
                     else if(x=='DEL'){
                          //alert(y.length);
                          var z=y.substring(0,y.length-1);
                          //z.length=y.length-1;
                          //alert(z.length);
                          document.getElementById("demo").innerHTML=z.toString();
                     }
                 }
                 function pre(k,i,y){
                     var n=0;
                     //var j=0;
                     n=parseFloat(y.substring(k,i));
                     /*for(j=k;j<i;j++){
                          n=(n*10)+parseFloat(y[j]);
                          //alert(y[j]);
                     }*/
                     //alert(n);
                     return n;   
                 }
                 function check(arr){
                   var i=0;
                   var c=1;
                   //alert(arr);
                   if((arr.length%2)!=0){
                     for(i=0;i<arr.length;i++){
                            if(i%2==0){
                                 if(parseFloat(arr[i]))
                                         c=1;
                                 else{
                                         c=0;
                                         break;
                                 }
                            }
                            else{
                                 if(arr[i]=="^"||arr[i]=="*"||arr[i]=="/"||arr[i]=="+"||arr[i]=="-"||arr[i]=="%")
                                         c=1;
                                 else{
                                         c=0;
                                         break;
                                 }
                            }
                     }
                   }
                   else
                      c=0;
                   //alert(c);
                   return c;
                 }
                 function operate(y){
                     var n=0;
                     var i=0;
                     var k=0;
                     var j=0;
                     var arr=[];
                     for(i=0;i<y.length;i++){
                        if(y[i]=="+"||y[i]=="-"||y[i]=="*"||y[i]=="/"||y[i]=="^"||y[i]=="%")
                        {
                           arr[j]=pre(k,i,y);
                           k=i+1;
                           arr[j+1]=y[i];
                           j=j+2;
                           //alert(arr);
                        }
                        else if(i==y.length-1&&parseFloat(y[i]))
                        { 
                                 i+=1;
                                 arr[j]=pre(k,i,y);
                                 k=i+1;
                                 arr[j+1]=y[i];
                                 j=j+1;
                        }
                     }
                     arr.length=j;
                     //alert(arr);
                    if(check(arr)){
                     for(i=0;i<arr.length;i++){
                           if(arr[i]=="^"){
                                  var c=parseFloat(arr[i+1]);
                                  var d=parseFloat(arr[i-1]);
                                  while(c!=1){
                                        arr[i-1]=parseFloat(arr[i-1])*d;
                                        c--;
                                  }
                                  if(arr.length==3)
                                           arr.length=1;
                                  else{
                                  for(j=i+2;j<arr.length;j++){
                                            arr[i]=arr[j];
                                            i++;
                                  }
                                  arr.length=arr.length-2;
                                  }
                                  i=0;
                                  //alert(arr);
                           }
                     }
                     for(i=0;i<arr.length;i++){
                           if(arr[i]=="*"||arr[i]=="/"||arr[i]=="%"){
                                  if(arr[i]=="*"){ 
                                            arr[i-1]=parseFloat(arr[i-1])*parseFloat(arr[i+1]);
                                  }

                                  else if(arr[i]=="/"){
                                            arr[i-1]=parseFloat(arr[i-1])/parseFloat(arr[i+1]);
                                  }
                                  else if(arr[i]=="%"){
                                            arr[i-1]=parseInt(arr[i-1])%parseInt(arr[i+1]);
                                  }
                                  if(arr.length==3)
                                           arr.length=1;
                                  else{
                                  for(j=i+2;j<arr.length;j++){
                                            arr[i]=arr[j];
                                            i++;
                                  }
                                  arr.length=arr.length-2;
                                  }
                                  //alert(arr);
                                  i=0;
                           }
                    }
                    for(i=0;i<arr.length;i++){
                           if(arr[i]=="+"||arr[i]=="-"){
                                  if(arr[i]=="+"){ 
                                       arr[i-1]=parseFloat(arr[i-1])+parseFloat(arr[i+1]);
                                  }
                                  else{
                                       arr[i-1]=parseFloat(arr[i-1])-parseFloat(arr[i+1]);
                                  }
                                  if(arr.length==3)
                                           arr.length=1;
                                  else{
                                  for(j=i+2;j<arr.length;j++){
                                            arr[i]=arr[j];
                                            i++;
                                  }
                                  arr.length=arr.length-2;
                                  }
                                  //alert(arr);
                                  i=0;
                           }
                     }
                     document.getElementById("demo").innerHTML=parseFloat(arr[0]);
                }
                else
                     document.getElementById("demo").innerHTML="INVALID SYNTAX";
                 } 
                 
         </script>       
   </body>
</html>
